import { Request, Response } from 'express';
import { container } from 'tsyringe';
import { classToClass } from 'class-transformer';

import Create<%= props.nameCamelCaseUpperFirst %>Service from '../../services/Create<%= props.nameCamelCaseUpperFirst %>Service';
import Update<%= props.nameCamelCaseUpperFirst %>Service from '../../services/Update<%= props.nameCamelCaseUpperFirst %>Service';

export default class <%= props.nameCamelCaseUpperFirst %>Controller {
    public async create(request: Request, response: Response): Promise<Response> {
        const <%= props.nameCamelCase %> = request.body;

        const create<%= props.nameCamelCaseUpperFirst %>Service = container.resolve(Create<%= props.nameCamelCaseUpperFirst %>Service);

        const <%= props.nameCamelCase %>Created = await create<%= props.nameCamelCaseUpperFirst %>Service.execute(<%= props.nameCamelCase %>);

        return response.status(201).json(classToClass(<%= props.nameCamelCase %>Created));
    }

    public async update(request: Request, response: Response): Promise<Response> {
        const updates = request.body;
        const <%= props.nameCamelCase %>Id = request.params.id;

        const update<%= props.nameCamelCaseUpperFirst %>Service = container.resolve(Update<%= props.nameCamelCaseUpperFirst %>Service);

        const <%= props.nameCamelCase %>Updated = await update<%= props.nameCamelCaseUpperFirst %>Service.execute(updates, <%= props.nameCamelCase %>Id);

        return response.json(classToClass(<%= props.nameCamelCase %>Updated));
    }
}
